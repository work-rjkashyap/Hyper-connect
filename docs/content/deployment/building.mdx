---
title: Building and Deployment
description: Build HyperConnect for production and create distributable packages
---

# Building and Deployment

This guide covers building HyperConnect for production and creating distributable packages for macOS, Windows, and Linux.

## Build Process

### Development Build

Build the application without creating packages:

```bash
npm run build
```

This command:

1. Runs TypeScript type checking
2. Builds main process with electron-vite
3. Builds renderer process with Vite
4. Outputs to `out/` directory

### Platform-Specific Builds

Create distributable packages for specific platforms:

```bash
# macOS (.dmg)
npm run build:mac

# Windows (.exe)
npm run build:win

# Linux (.AppImage, .deb)
npm run build:linux

# All platforms
npm run build:all
```

Distributables are created in the `dist/` directory.

## Electron Builder Configuration

HyperConnect uses electron-builder for packaging. Configuration is in `electron-builder.yml`:

```yaml
appId: com.hyperconnect.app
productName: HyperConnect
directories:
  buildResources: build
  output: dist
files:
  - '!**/.vscode/*'
  - '!src/*'
  - '!electron.vite.config.{js,ts,mjs,cjs}'
  - '!{.eslintignore,.eslintrc.cjs,.prettierignore,.prettierrc.yaml,dev-app-update.yml,CHANGELOG.md,README.md}'
  - '!{.env,.env.*,.npmrc,pnpm-lock.yaml}'
  - '!{tsconfig.json,tsconfig.node.json,tsconfig.web.json}'
asarUnpack:
  - resources/**
afterSign: build/notarize.js

# macOS Configuration
mac:
  target:
    - dmg
    - zip
  artifactName: ${productName}-${version}-${arch}.${ext}
  category: public.app-category.utilities
  hardenedRuntime: true
  gatekeeperAssess: false
  entitlements: build/entitlements.mac.plist
  entitlementsInherit: build/entitlements.mac.plist
  extendInfo:
    NSLocalNetworkUsageDescription: >-
      HyperConnect needs access to your local network to discover
      and connect to other devices.
    NSBonjourServices:
      - _hyperconnect._tcp

# Windows Configuration
win:
  target:
    - nsis
    - portable
  artifactName: ${productName}-${version}-${arch}.${ext}

# Linux Configuration
linux:
  target:
    - AppImage
    - deb
  artifactName: ${productName}-${version}-${arch}.${ext}
  category: Utility
```

## macOS Specific

### Code Signing

For macOS distribution, you need to sign your app:

1. **Get Developer ID Certificate**:
   - Enroll in Apple Developer Program
   - Create Developer ID Application certificate
   - Download and install in Keychain

2. **Configure Signing**:

```yaml
# electron-builder.yml
mac:
  identity: 'Developer ID Application: Your Name (TEAM_ID)'
  hardenedRuntime: true
```

3. **Entitlements**:
   Create `build/entitlements.mac.plist`:

```xml
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE plist PUBLIC "-//Apple//DTD PLIST 1.0//EN" "http://www.apple.com/DTDs/PropertyList-1.0.dtd">
<plist version="1.0">
<dict>
  <key>com.apple.security.cs.allow-unsigned-executable-memory</key>
  <true/>
  <key>com.apple.security.network.client</key>
  <true/>
  <key>com.apple.security.network.server</key>
  <true/>
</dict>
</plist>
```

### Notarization

For macOS 10.15+, apps must be notarized:

1. **Create App-Specific Password**:
   - Go to appleid.apple.com
   - Generate app-specific password

2. **Configure Notarization**:

```javascript
// build/notarize.js
const { notarize } = require('@electron/notarize')

exports.default = async function notarizing(context) {
  const { electronPlatformName, appOutDir } = context
  if (electronPlatformName !== 'darwin') return

  const appName = context.packager.appInfo.productFilename

  return await notarize({
    appBundleId: 'com.hyperconnect.app',
    appPath: `${appOutDir}/${appName}.app`,
    appleId: process.env.APPLE_ID,
    appleIdPassword: process.env.APPLE_PASSWORD,
    teamId: process.env.APPLE_TEAM_ID
  })
}
```

3. **Set Environment Variables**:

```bash
export APPLE_ID="your@email.com"
export APPLE_PASSWORD="app-specific-password"
export APPLE_TEAM_ID="TEAM_ID"
```

## Windows Specific

### Code Signing

Sign Windows executables:

1. **Get Code Signing Certificate**:
   - Purchase from certificate authority
   - Or use self-signed for testing

2. **Configure Signing**:

```yaml
# electron-builder.yml
win:
  certificateFile: path/to/certificate.pfx
  certificatePassword: ${env.CERTIFICATE_PASSWORD}
```

### NSIS Installer

Customize Windows installer:

```yaml
nsis:
  oneClick: false
  allowToChangeInstallationDirectory: true
  createDesktopShortcut: true
  createStartMenuShortcut: true
```

## Linux Specific

### AppImage

AppImage is a universal Linux package format:

```yaml
linux:
  target: AppImage
  category: Utility
```

### Debian Package

Create .deb packages for Debian/Ubuntu:

```yaml
linux:
  target: deb
  depends:
    - gconf2
    - gconf-service
    - libnotify4
    - libappindicator1
```

## Auto-Updates

HyperConnect supports automatic updates using electron-updater.

### Configuration

```yaml
# electron-builder.yml
publish:
  provider: github
  owner: work-rjkashyap
  repo: Hyper-connect
```

### Implementation

```typescript
// src/main/index.ts
import { autoUpdater } from 'electron-updater'

autoUpdater.checkForUpdatesAndNotify()

autoUpdater.on('update-available', () => {
  // Notify user
})

autoUpdater.on('update-downloaded', () => {
  // Prompt to restart
})
```

## Release Process

HyperConnect uses GitHub Actions for automated releases.

### Workflow

```yaml
# .github/workflows/build.yml
name: Build and Release

on:
  push:
    tags:
      - 'v*'

jobs:
  release:
    runs-on: ${{ matrix.os }}
    strategy:
      matrix:
        os: [macos-latest, windows-latest, ubuntu-latest]

    steps:
      - uses: actions/checkout@v3
      - uses: actions/setup-node@v3
      - run: npm install
      - run: npm run build
      - run: npm run build:${{ matrix.os }}
      - uses: softprops/action-gh-release@v1
        with:
          files: dist/*
```

### Creating a Release

1. **Update Version**:

```bash
npm version patch  # or minor, major
```

2. **Create Tag**:

```bash
git tag v1.0.0
git push origin v1.0.0
```

3. **GitHub Action Runs**:
   - Builds for all platforms
   - Creates GitHub Release
   - Uploads distributables

### Manual Release

Use the provided script:

```bash
./release.sh v1.0.0
```

This script:

1. Commits changes
2. Creates and pushes tag
3. Triggers GitHub Action

## Semantic Versioning

Follow [SemVer](https://semver.org/):

- **Patch** (1.0.x): Bug fixes
- **Minor** (1.x.0): New features (backward compatible)
- **Major** (x.0.0): Breaking changes

## Build Optimization

### Reduce Bundle Size

1. **Tree Shaking**: Remove unused code
2. **Code Splitting**: Split renderer code
3. **Compression**: Enable ASAR compression

```yaml
# electron-builder.yml
asar: true
compression: maximum
```

### Performance

1. **Minification**: Enabled by default in production
2. **Source Maps**: Disable for production
3. **Native Modules**: Rebuild for target platform

## Troubleshooting

### Build Fails

- Check Node.js version (v18+)
- Clear `node_modules` and reinstall
- Check electron-builder logs

### Code Signing Issues

- Verify certificate is valid
- Check certificate password
- Ensure certificate is in Keychain (macOS)

### Notarization Fails

- Verify Apple ID credentials
- Check team ID is correct
- Review notarization logs

## Next Steps

- [Development](/docs/getting-started/development) - Development workflow
- [Architecture](/docs/architecture/overview) - Understand the app
- [GitHub Releases](https://github.com/work-rjkashyap/Hyper-connect/releases) - View releases
